@import "tailwindcss";

/* ====== Light Theme (default) ====== */
:root {
  --c-page: #f5f5f7;
  --c-panel: #ffffff;
  --c-card: #ffffff;
  --c-card-hover: #f0f1f3;
  --c-input-bg: #f0f1f3;
  --c-line: #e2e4e9;
  --c-line-subtle: #f0f1f3;
  --c-overlay: rgba(0, 0, 0, 0.25);
  --c-modal: #ffffff;
  --c-ink: #1a1a2e;
  --c-ink-secondary: #4b5563;
  --c-ink-muted: #9ca3af;
  --c-ink-faint: #d1d5db;
  --c-accent-soft: rgba(124, 58, 237, 0.06);
  --c-accent-border: rgba(124, 58, 237, 0.15);
  --c-accent-text: #7c3aed;
  --c-green-soft: rgba(16, 185, 129, 0.08);
  --c-green-text: #059669;
  --c-user-bubble: #7c3aed;
  --c-ai-avatar-from: rgba(124, 58, 237, 0.1);
  --c-ai-avatar-to: rgba(59, 130, 246, 0.1);
  --c-ai-bubble: #ffffff;
  --c-ai-bubble-border: #e2e4e9;
  --c-loading-dot: #9ca3af;
  --c-code-bg: #1e1e2e;
  --c-code-text: #cdd6f4;
  --c-inline-code-bg: rgba(124, 58, 237, 0.08);
  --c-inline-code-text: #7c3aed;
  --c-blockquote-border: rgba(124, 58, 237, 0.4);
  --c-blockquote-text: #6b7280;
  --c-table-border: #e2e4e9;
  --c-table-header: #f9fafb;
  --c-link: #7c3aed;
  --c-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
}

/* ====== Dark Theme ====== */
[data-theme="dark"] {
  --c-page: #0f0f0f;
  --c-panel: #171717;
  --c-card: rgba(255, 255, 255, 0.04);
  --c-card-hover: rgba(255, 255, 255, 0.07);
  --c-input-bg: rgba(255, 255, 255, 0.04);
  --c-line: rgba(255, 255, 255, 0.07);
  --c-line-subtle: rgba(255, 255, 255, 0.04);
  --c-overlay: rgba(0, 0, 0, 0.6);
  --c-modal: #1a1a1a;
  --c-ink: rgba(255, 255, 255, 0.88);
  --c-ink-secondary: rgba(255, 255, 255, 0.5);
  --c-ink-muted: rgba(255, 255, 255, 0.28);
  --c-ink-faint: rgba(255, 255, 255, 0.13);
  --c-accent-soft: rgba(139, 92, 246, 0.1);
  --c-accent-border: rgba(139, 92, 246, 0.25);
  --c-accent-text: #a78bfa;
  --c-green-soft: rgba(16, 185, 129, 0.1);
  --c-green-text: #34d399;
  --c-user-bubble: #7c3aed;
  --c-ai-avatar-from: rgba(139, 92, 246, 0.2);
  --c-ai-avatar-to: rgba(59, 130, 246, 0.2);
  --c-ai-bubble: rgba(255, 255, 255, 0.04);
  --c-ai-bubble-border: rgba(255, 255, 255, 0.06);
  --c-loading-dot: rgba(255, 255, 255, 0.3);
  --c-code-bg: rgba(0, 0, 0, 0.4);
  --c-code-text: #cdd6f4;
  --c-inline-code-bg: rgba(139, 92, 246, 0.12);
  --c-inline-code-text: #c4b5fd;
  --c-blockquote-border: rgba(139, 92, 246, 0.5);
  --c-blockquote-text: rgba(255, 255, 255, 0.45);
  --c-table-border: rgba(255, 255, 255, 0.06);
  --c-table-header: rgba(255, 255, 255, 0.03);
  --c-link: #a78bfa;
  --c-shadow: none;
}

/* ====== Register as Tailwind theme colors ====== */
@theme inline {
  --color-page: var(--c-page);
  --color-panel: var(--c-panel);
  --color-card: var(--c-card);
  --color-card-hover: var(--c-card-hover);
  --color-input-bg: var(--c-input-bg);
  --color-line: var(--c-line);
  --color-line-subtle: var(--c-line-subtle);
  --color-overlay: var(--c-overlay);
  --color-modal: var(--c-modal);
  --color-ink: var(--c-ink);
  --color-ink-secondary: var(--c-ink-secondary);
  --color-ink-muted: var(--c-ink-muted);
  --color-ink-faint: var(--c-ink-faint);
  --color-accent-soft: var(--c-accent-soft);
  --color-accent-border: var(--c-accent-border);
  --color-accent-text: var(--c-accent-text);
  --color-green-soft: var(--c-green-soft);
  --color-green-text: var(--c-green-text);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background: var(--c-page);
  color: var(--c-ink);
  font-family: var(--font-sans), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ====== Global button reset ====== */
button {
  cursor: pointer;
}
button:disabled {
  cursor: not-allowed;
}
select {
  cursor: pointer;
}
a {
  cursor: pointer;
}

/* ====== Scrollbar ====== */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--c-line) transparent;
}
*::-webkit-scrollbar { width: 5px; height: 5px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb { background: var(--c-line); border-radius: 999px; }
*::-webkit-scrollbar-thumb:hover { background: var(--c-ink-faint); }

/* ===== Markdown Styles (theme-aware) ===== */
.markdown-body h1, .markdown-body h2, .markdown-body h3 {
  font-weight: 600;
  margin-top: 1em;
  margin-bottom: 0.5em;
  line-height: 1.4;
  color: var(--c-ink);
}
.markdown-body h1 { font-size: 1.2rem; }
.markdown-body h2 { font-size: 1.1rem; }
.markdown-body h3 { font-size: 1rem; }

.markdown-body p { margin: 0.5em 0; line-height: 1.75; }

.markdown-body ul, .markdown-body ol { padding-left: 1.5em; margin: 0.5em 0; }
.markdown-body ul { list-style-type: disc; }
.markdown-body ol { list-style-type: decimal; }
.markdown-body li { margin: 0.25em 0; }
.markdown-body li::marker { color: var(--c-ink-faint); }

.markdown-body strong { font-weight: 600; color: var(--c-ink); }

.markdown-body hr { border: none; border-top: 1px solid var(--c-line); margin: 1em 0; }

.markdown-body code:not(pre code) {
  background: var(--c-inline-code-bg);
  color: var(--c-inline-code-text);
  padding: 0.15em 0.4em;
  border-radius: 5px;
  font-size: 0.85em;
  font-family: var(--font-mono), ui-monospace, monospace;
}

.markdown-body pre {
  background: var(--c-code-bg);
  color: var(--c-code-text);
  border: 1px solid var(--c-line);
  border-radius: 12px;
  padding: 1em;
  overflow-x: auto;
  margin: 0.75em 0;
  font-size: 0.8rem;
  line-height: 1.6;
}
.markdown-body pre code { background: none; color: inherit; padding: 0; font-size: inherit; }

.markdown-body table { width: 100%; border-collapse: collapse; margin: 0.75em 0; font-size: 0.85rem; }
.markdown-body th, .markdown-body td { border: 1px solid var(--c-table-border); padding: 0.5em 0.75em; text-align: left; }
.markdown-body th { background: var(--c-table-header); font-weight: 600; color: var(--c-ink-secondary); }

.markdown-body blockquote {
  border-left: 3px solid var(--c-blockquote-border);
  padding-left: 1em;
  margin: 0.75em 0;
  color: var(--c-blockquote-text);
}

.markdown-body a { color: var(--c-link); text-decoration: none; }
.markdown-body a:hover { text-decoration: underline; }

.markdown-body img { max-width: 100%; border-radius: 12px; margin: 0.5em 0; }

.markdown-body > *:first-child { margin-top: 0; }
.markdown-body > *:last-child { margin-bottom: 0; }

/* ====== Range input ====== */
input[type="range"] { -webkit-appearance: none; height: 4px; background: var(--c-line); border-radius: 2px; outline: none; }
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none; width: 16px; height: 16px; border-radius: 50%;
  background: #8b5cf6; cursor: pointer; border: 2px solid var(--c-modal);
}

/* ====== Modal & Overlay entrance ====== */
.modal-overlay {
  animation: fadeIn 0.2s ease-out;
}
.modal-content {
  animation: modalSlideIn 0.25s cubic-bezier(0.16, 1, 0.3, 1);
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes modalSlideIn {
  from { opacity: 0; transform: scale(0.96) translateY(8px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}

/* ====== Message entrance ====== */
.msg-enter {
  animation: msgSlideIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
}
@keyframes msgSlideIn {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ====== Thinking Block ====== */
.thinking-block {
  position: relative;
  background: linear-gradient(135deg, var(--c-accent-soft), transparent);
}
.thinking-block::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(135deg, var(--c-accent-border), transparent);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}
.thinking-content {
  max-height: 300px;
  overflow-y: auto;
  animation: fadeSlideIn 0.25s cubic-bezier(0.16, 1, 0.3, 1);
}

/* ====== Tool Call Card ====== */
.tool-call-card {
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}
.tool-call-card:hover {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  border-color: var(--c-ink-faint) !important;
}
[data-theme="dark"] .tool-call-card:hover {
  box-shadow: 0 2px 12px rgba(255, 255, 255, 0.03);
}
.tool-detail-content {
  animation: fadeSlideIn 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

/* ====== Collapsible transitions ====== */
@keyframes fadeSlideIn {
  from { opacity: 0; transform: translateY(-6px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.thinking-shimmer {
  background: linear-gradient(
    90deg,
    var(--c-accent-soft) 25%,
    var(--c-accent-border) 50%,
    var(--c-accent-soft) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 2s ease-in-out infinite;
}

/* ====== Typing wave indicator ====== */
.typing-dot {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: linear-gradient(135deg, #7c3aed, #3b82f6);
  opacity: 0.6;
  animation: typingWave 1.4s ease-in-out infinite;
}
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingWave {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-6px); opacity: 1; }
}

/* ====== Loading dots text animation ====== */
.loading-dots::after {
  content: "";
  animation: dots 1.5s steps(4, end) infinite;
}
@keyframes dots {
  0%, 20% { content: ""; }
  40% { content: "."; }
  60% { content: ".."; }
  80%, 100% { content: "..."; }
}

/* ====== MCP Marketplace Card ====== */
.mcp-preset-card {
  transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
}
.mcp-preset-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
  border-color: var(--c-accent-border) !important;
}
[data-theme="dark"] .mcp-preset-card:hover {
  box-shadow: 0 8px 24px rgba(255, 255, 255, 0.04);
}

/* ====== Tab active indicator ====== */
.tab-active {
  position: relative;
}
.tab-active::after {
  content: "";
  position: absolute;
  bottom: -1px;
  left: 4px;
  right: 4px;
  height: 2px;
  background: linear-gradient(90deg, #7c3aed, #3b82f6);
  border-radius: 2px;
  animation: tabSlideIn 0.2s ease-out;
}
@keyframes tabSlideIn {
  from { transform: scaleX(0); }
  to { transform: scaleX(1); }
}

/* ====== Global input/select focus ring ====== */
input:focus, textarea:focus, select:focus {
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

/* ====== Interactive button press feedback ====== */
.btn-press {
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}
.btn-press:active:not(:disabled) {
  transform: scale(0.97);
}

/* ====== Sidebar session hover ====== */
.session-item {
  transition: all 0.15s ease;
}
.session-item:active {
  transform: scale(0.98);
}
